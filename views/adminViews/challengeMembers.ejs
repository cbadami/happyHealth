<div class="app-main__inner">

    <% if ( challengeData[0].participantType=='Group' ) { %>
        <div>
            <h1> <b>Manage Groups</b> </h1>
            <h2>Challenge Name : <%= challengeData[0].challengeName %>
            </h2>
            <h3>Participant Type: <%= challengeData[0].participantType %>
            </h3>

        </div>

        <form>
            <label for="user"> Select Groups: </label>

            <div class="form-group">
                <select class="selectpicker form-control col-md-4">
                    <option selected>Avengers</option>
                    <option>Champions</option>
                    <option>Legends</option>
                    <option>Bosses</option>
                    <option>Power Rangers</option>
                    <option>Thunder Guys</option>
                </select>

            </div>
            <input type="submit" value="Add"> </input>
        </form>

        <table class="table">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Group Name</th>
                    <th scope="col">Edit</th>
                    <th scope="col">Delete</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">1</th>
                    <td>Delta Blues</td>
                    <td> <button type="button" class="btn btn-primary">Edit</button></td>
                    <td> <button type="button" class="btn btn-danger">Delete</button></td>
                </tr>

                <tr>
                    <th scope="row">2</th>
                    <td>Golden Archers</td>
                    <td> <button type="button" class="btn btn-primary">Edit</button></td>
                    <td> <button type="button" class="btn btn-danger">Delete</button></td>
                </tr>

                <tr>
                    <th scope="row">3</th>
                    <td>Little Colonels</td>
                    <td> <button type="button" class="btn btn-primary">Edit</button></td>
                    <td> <button type="button" class="btn btn-danger">Delete</button></td>
                </tr>

            </tbody>
        </table>

        <% } else { %>

            <div>

                <!-- <h1> <b>Manage Users</b> </h1> -->
                <h3>Challenge Name : <%= challengeData[0].challengeName %></h3>
            </div>
            
            <form action="<%= challengeData[0].challengeId%>" method="POST">
                <div>
                    <label for="addUser"><strong>Invite User: </strong> </label>
                    <select name="userId" class="form-control addUser">
                        <% for (var i=0; i < notJoinedUsers.length;i++) { %>
                            <option selected = "<%= notJoinedUsers[i].userId %>" value="<%= notJoinedUsers[i].userId %>">
                                <%= notJoinedUsers[i].userName %>
                            </option>
                            <% } %>
                    </select>
                    <button type="submit" class="btn btn-primary">Invite</button>
                </div>

            </form>

            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Sl.No</th>
                        <th>Username</th>
                        <th>Status</th>
                        <th>Remove user</th>
                    </tr>
                </thead>
                <tbody>
                    <% for (var i=0; i < joinedUsers.length;i++) { %>
                        <tr>
                            <th scope="row">
                                <%= i+1 %>
                            </th>
                            <td>
                                <%= joinedUsers[i].userName%>
                            </td>
                            <td>
                        		   <% 	if( joinedUsers[i].accepted == 1) { %>
											Joined 
									<%   }else{ %>
											Pending
										<%  } %>
                            </td>
                            <td>
                                <form action="/removeUser/<%= challengeData[0].challengeId%>/<%= joinedUsers[i].userId%>" method="POST">
                                 
									<% 	if( joinedUsers[i].accepted ) { %>
										<button type="submit" id="PopoverCustomT-1" class="btn btn-primary btn-danger">Remove</button>
										<%   }else{ %>
											<button type="submit" id="PopoverCustomT-1" class="btn btn-primary btn-danger"> Cancel Invitation</button>
											<%  } %>
									
                                </form>
                            </td>
                        </tr>
                        <% } %>
                </tbody>
            </table>

            <% } %>


</div>

<script>
    const notJoinedUsers = "<%= notJoinedUsers[0].userName %>"
    console.log(notJoinedUsers,"-----------not Joined user");
</script>

<style>
    .addUser{
        width: 250px;
        display: inline-flex;
    }
    .btn{
        display: inline-flex;
    }
</style>